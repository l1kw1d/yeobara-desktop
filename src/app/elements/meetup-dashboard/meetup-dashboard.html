<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="meetup-dashboard">
  <template>
    <style include="shared-styles"></style>
    <style>
      :host {
        display: block;
      }

      paper-dialog {
        width: 640px;
        height: 500px;
        overflow: auto;
        background-color: white;
        margin-top: 0px;
      }

      paper-dialog > *:first-child {
        margin-top: 0px;
      }

      .meetup-info {
        padding: 20px 20px;
        margin: 0 20px;
        margin-bottom: 20px;
      }

      #inputBox {
        display: none;
      }

      paper-material .info-button {
        display: none;
      }

      paper-material:hover .info-button {
        display: block;
      }
    </style>
    <paper-dialog modal id="dialog" entry-animation="scale-up-animation" exit-animation="fade-out-animation">
      <paper-toolbar>
        <span class="flex"></span>
        <!-- Toolbar icons -->
        <paper-icon-button icon="add" on-click="addMeetup"></paper-icon-button>
        <paper-icon-button icon="close"></paper-icon-button>

        <!-- Application name -->
        <div class="middle middle-container center horizontal layout">
          <div>Meetups</div>
        </div>
      </paper-toolbar>

      <div id="inputBox">
        <paper-input id="meetupName" on-blur="onBlur" label="Meetup name"></paper-input>
        <paper-textarea id="meetupDesc" on-blur="onBlur" label="Description" rows="3" max-rows="3"></paper-textarea>
      </div>

      <firebase-collection location="https://incandescent-inferno-7167.firebaseio.com/meetups" data="{{meetups}}"></firebase-collection>

      <template is="dom-repeat" items="[[meetups]]" as="meetups">
        <paper-material class="meetup-info" elevation="1">
          <div class="horizontal layout">
            <h4>[[meetups.friendlyName]]</h4>
            <span class="flex"></span>
            <paper-icon-button class="info-button" icon="icons:done"></paper-icon-button>
            <paper-icon-button class="info-button" icon="delete"></paper-icon-button>
          </div>
          <label>It's out 3rd meetup. this time we're gonna show amazing electron application</label>
          <ul>
            <li>Date: 2015-10-30</li>
            <li>Location: Toz tower branch in Kangnam</li>
          </ul>
        </paper-material>
      </template>
    </paper-dialog>
  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'meetup-dashboard',
        open: function () {
          this.$.dialog.open();
        },
        onBlur: function () {
          if (!this.$.meetupName.focused && !this.$.meetupDesc.focused) {
            this.$.inputBox.style.display = 'none';
          }
        },
        addMeetup: function () {
          this.$.inputBox.style.display = 'block';
          this.$.meetupName.$.input.focus();
        }
      });
    })();
  </script>
</dom-module>
